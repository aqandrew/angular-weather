<div class="h-full w-full my-8">
  <main
    class="max-w-xl lg:max-w-3xl mx-auto p-4 pb-6 bg-white rounded shadow-lg"
  >
    <h1 class="text-center text-5xl mb-4">How's the weather? ☀️</h1>
    <form [formGroup]="weatherForm" (ngSubmit)="onSubmit()">
      <label for="city" class="block mb-2">Please enter a city:</label>
      <div class="w-full mb-2">
        <div class="flex mb-2">
          <input
            type="text"
            id="city"
            formControlName="city"
            class="bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-l py-2 px-3 block flex-1 appearance-none"
            required
          />
          <button
            type="submit"
            class="py-2 px-3 rounded-r bg-green-600 hover:bg-green-700 text-white"
          >
            Get Forecast
          </button>
        </div>
        <div
          *ngIf="submitted && !isWeatherFormInputValid('city')"
          class="py-2 px-3 bg-red-300 text-red-900 border border-red-400 rounded"
        >
          A city is required.
        </div>
      </div>
      <div class="text-sm text-gray-700">
        <p>
          You can specify a country using a
          <a
            href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements"
            target="_blank"
            rel="noopener noreferrer"
            class="underline font-bold text-blue-600"
            >two-letter country code</a
          >.
        </p>
        <p>
          For example, you can search for Springfield, Belize by typing
          <span class="p-1 border border-gray-300 rounded">springfield,bz</span
          >.
        </p>
      </div>
    </form>
    <!-- TODO There's probably a more logical way to name "submitted" -->
    <div *ngIf="submitted === false && forecast !== undefined">
      <h2>
        5-Day Forecast for {{ forecast.city?.name }},
        {{ forecast.city?.country }}
      </h2>
      <form [formGroup]="forecastForm">
        <label for="showMax">
          Show high
          <input type="checkbox" id="showMax" formControlName="showMax"
        /></label>
        <label for="showMean">
          Show mean
          <input type="checkbox" id="showMean" formControlName="showMean"
        /></label>
        <label for="showMin">
          Show low
          <input type="checkbox" id="showMin" formControlName="showMin"
        /></label>
      </form>
      <ol>
        <li *ngFor="let item of forecast5Days">
          <h3>
            {{
              item.date.toLocaleDateString(undefined, {
                weekday: "long",
                month: "numeric",
                day: "numeric"
              })
            }}
          </h3>
          <p [hidden]="!showMax">High: {{ formatTemperature(item.tempMax) }}</p>
          <p [hidden]="!showMean">
            Mean: {{ formatTemperature(item.tempMean) }}
          </p>
          <p [hidden]="!showMin">Low: {{ formatTemperature(item.tempMin) }}</p>
        </li>
      </ol>
    </div>
  </main>
</div>
